function validator(a){return errors=new Object,errors.start=function(){var c,d,b=errors.getRequiredFields();if(!errors.testParams(a))return!1;for(var f=0;f<b.length;f++)errors.listen("#"+b[f].id,"change",function(b){"topDisplay"===a.display&&(b.dataset&&b.dataset.group?(d=errors.getGroupMemberIds(b.dataset.group),d.forEach(function(a){document.getElementById("err-"+a)&&document.getElementById("err-"+a).remove()})):document.getElementById("err-"+b.id)&&document.getElementById("err-"+b.id).remove()),errorList=errors.validate(b,[]),c=b.dataset&&b.dataset.group?b.dataset.group:b.id,errorList.length?"topDisplay"===a.display&&errorList.forEach(function(a){errors.addError(a)}):"topDisplay"===a.display&&document.getElementById("err-"+b.id)?document.getElementById("err-"+c).remove():errors.clearError(c)}),b[f].dataset&&"date"===b[f].dataset.type&&""===document.getElementById(b[f].id).value&&b[f].dataset.format&&b[f].dataset.separator&&(errors.checkDateFormat(b[f].id,b[f].dataset.format,b[f].dataset.separator),document[a.formName][b[f].name].placeholder=errors.formatDatePlaceholder(b[f].dataset.format,b[f].dataset.separator));a.autoSubmit&&document.getElementById(a.submitButtonId)&&errors.listen("#"+a.submitButtonId,"click",function(){errors.validateAll()})},errors.testParams=function(a){var b=!1,c=[],d=["display","formName","submitButtonId","autoSubmit","padDates","topErrorTargetId","topErrorItemClass","errorMessageClass","errorHideClass"];return"object"!==typeof a?(errors.showInternalError("Your errorParams variable is not a valid object."),!1):(d.forEach(function(b){a.hasOwnProperty(b)||c.push(b)}),c.length?(errors.showInternalError("You failed to pass the following values in your errorParams object: "+c.join(", ")+"."),!1):(d.forEach(function(b){var d="padDates"===b||"autoSubmit"===b?"boolean":"string",e=!0;return typeof a[b]!==d&&(errors.showInternalError("The value of "+b+" must be of the type "+d+"."),e=!1),e?void 0:!1}),!a.autoSubmit||document.getElementById(a.submitButtonId)&&""!=a.submitButtonId.trim()?document.getElementById(a.formName)?"topDisplay"!==a.display||document.getElementById(a.topErrorTargetId)?(["display","topErrorItemClass","errorMessageClass","errorHideClass"].forEach(function(c){return""===a[c].trim()?(errors.showInternalError('The errorParams "'+c+'" value cannot be an empty string.'),void(b=!0)):void 0}),b?!1:!0):(errors.showInternalError('The element "'+a.topErrorTargetId+"\" referenced in your errorParams object doesn't exist."),!1):(errors.showInternalError('The form "'+a.formName+"\" referenced in your errorParams object doesn't exist."),!1):(errors.showInternalError("You can't use the autoSubmit feature because the submitButtonId you passed in was undefined or doesn't exist."),!1)))},errors.formatDatePlaceholder=function(a,b){return"m"===a.substr(0,1).toLowerCase()||"d"===a.substr(0,1).toLowerCase()?a.substr(0,2)+b+a.substr(2,2)+b+a.substr(4,4):"y"===a.substr(0,1).toLowerCase()?a.substr(0,4)+b+a.substr(4,2)+b+a.substr(6,2):""},errors.showMissingElement=function(a){return document.getElementById(a)?void 0:(errors.showInternalError('The error display element "'+a+'" is missing.'),!0)},errors.showInternalError=function(a){return console.warn("VALIDATOR SAYS: "+a),!0},errors.showError=function(b,c){return b+="-error",errors.showMissingElement(b)?!1:(document.getElementById(b).innerHTML=c,void errors.removeClass(b,a.errorHideClass))},errors.clearError=function(b){return b+="-error",errors.showMissingElement(b)?!1:(document.getElementById(b).innerHTML="",void errors.addClass(b,a.errorHideClass))},errors.addError=function(b){newElement=document.createElement("span"),newElement.innerHTML=b,document.getElementById(a.topErrorTargetId).appendChild(newElement),errors.removeClass(a.topErrorTargetId,a.errorHideClass)},errors.clearErrors=function(){if("onField"===a.display)for(var b=errors.getRequiredFields(),c=0;c<b.length;c++)errors.clearError(b[c].dataset&&b[c].dataset.group?b[c].dataset.group:b[c].id);else document.getElementById(a.topErrorTargetId).innerHTML="",errors.addClass(a.topErrorTargetId,a.errorHideClass)},errors.output=function(b){var c="";errors.removeClass(a.topErrorTargetId,a.errorHideClass),b.forEach(function(a){c+=a}),document.getElementById(a.topErrorTargetId).innerHTML=c},errors.getRequiredFields=function(){var b,c,a=[];return["input","select","textarea"].forEach(function(d){b=Array.prototype.slice.call(document.getElementsByTagName(d));for(var f=0;f<b.length;f++)if("button"!==b[f].type&&b[f].dataset&&b[f].dataset.required){if(!b[f].dataset.type||!b[f].dataset.label)return c='The input element called "'+b[f].id+'" is missing either its dataset.type or dataset.label.',errors.showInternalError(c),!1;if(b[f].dataset&&b[f].dataset.fromTo&&"from"!==b[f].dataset.fromTo&&"to"!==b[f].dataset.fromTo)return c='The dataset.from-to value at the input element "'+b[f].id+'" must be either "from" or "to" (case sensitive).',errors.showInternalError(c),!1;a.push(b[f])}}),a},errors.placeValidatedFlag=function(){var b='<input type="hidden" id="clientValidated" name="clientValidated" value="true">';document.getElementById("clientValidated")||(newElement=document.createElement("span"),newElement.innerHTML=b,document.getElementById(a.formName).appendChild(newElement))},errors.removeValidatedFlag=function(){document.getElementById("clientValidated")&&document.getElementById("clientValidated").remove()},errors.validateAll=function(){var b=errors.getRequiredFields();errors.removeValidatedFlag(),errors.clearErrors(),errorList=[];for(var c=0;c<b.length;c++)"onField"===a.display?errors.validate(b[c],errorList):"topDisplay"===a.display&&(errorList=errors.validate(b[c],errorList));return"topDisplay"===a.display&&errorList.length&&errors.output(errorList),errorList.length||(errors.placeValidatedFlag(),a.autoSubmit&&document[a.formName].submit()),errorList.length?!1:!0},errors.validate=function(b,c){var f,j,l,m,o,p,q,r,e="",g=0,k="",n=!1;if((d=b.dataset)&&d.label)switch(d.type){case"string":e=""===b.value.trim()&&"true"===d.required?"Please enter the "+d.label:errors.checkConditions(d,b,g);break;case"number":""===b.value.trim()&&"true"===d.required?e="Please enter the "+d.label:isNaN(b.value)?e="onField"===a.display?"This must be a numeric value":"The "+d.label+" must be a numeric value":d.numtype&&"integer"===d.numtype&&b.value.indexOf(".")>-1&&(e="onField"===a.display?"This must be a whole number":"The "+d.label+" must be a whole number"),""===e&&(e=errors.checkConditions(d,b,g));break;case"date":if(d.group){if(l=errors.getGroupMemberIds(d.group),2!==l.length)return errors.showInternalError("A date range group must have two fields, no more, no less."),!1;o=errors.getDateRangeDates(b.id,d.group),fromDateObj=errors.makeField(o.fromDateId),toDateObj=errors.makeField(o.toDateId),"true"===d.required?errors.checkDate(fromDateObj)&&errors.checkDate(toDateObj)||(e="onField"===a.display?"Please enter valid from/to dates in "+errors.showDateFormat(d)+" format":"Please enter valid from/to dates in "+errors.showDateFormat(d)+" format at "+d.label):b.value.length&&(errors.checkDate(b)&&errors.checkDate(b)||(e="onField"===a.display?"Please enter valid from/to dates":"Please enter valid from/to dates at "+d.label)),e.length||(p=document[a.formName][o.fromDateId].value.trim(),q=document[a.formName][o.toDateId].value.trim(),errors.checkDateRange(p,q)||(e="onField"===a.display?"The To date can't come before the From date":"The To date can't come before the From date at "+d.label)),""===e&&b.value.length&&errors.padDate(b)}else""===b.value.trim()&&"true"===d.required?e="Please enter the "+d.label:b.value.trim().length&&!errors.checkDate(b)&&(e="onField"===a.display?"Please enter a valid date in "+errors.showDateFormat(d)+" format":"Please enter a valid date in "+errors.showDateFormat(d)+" format at "+d.label),""===e&&errors.padDate(b);break;case"check":d.group&&(g=errors.getGroupStatus(d.group)),d.group&&"true"===d.required?e=0===g?"onField"===a.display?"Please check on at least one item":"Please check on at least one item at "+d.label:errors.checkConditions(d,b,g):d.group&&"false"===d.required?e=errors.checkConditions(d,b,g):"true"!==d.required||document.getElementById(b.id).checked||(e="onField"===a.display?"Please check this on":"Please check the "+d.label+" checkbox on");break;case"radio":errors.checkRadio(b.name)||"true"!==d.required||(e="onField"===a.display?"Please make a selection":"Please make a selection at "+d.label);break;case"select":""===b.value.trim()&&"true"===d.required&&(e="onField"===a.display?"Please make a selection":"Please make a selection at "+d.label);break;case"multiselect":""===b.value.trim()&&"true"===d.required&&(e="onField"===a.display?"Please make a selection":"Please make a selection at "+d.label),""===e&&(e=errors.checkConditions(d,b,g));break;case"file":if(!d.filetypes)return e='The file input element called "'+b.id+'" is missing its dataset.filetypes parameter. That\n',e+="parameter must be used, even if its value is an empty string (meaning any file type may be uploaded).",errors.showInternalError(e),!1;if(d.filetypes.length&&(""===b.value.trim()&&"true"===d.required&&(e="onField"===a.display?"Please choose a file":"Please choose a file at "+d.label),""===e&&b.value.trim().length))if(b.value.indexOf(".")<0)e="onField"===a.display?"The filename extension is missing":"The filename extension is missing at "+d.label;else{l=b.value.split("."),m=l[l.length-1].toLowerCase(),j=d.filetypes.split(",");for(var s=0;s<j.length;s++)k+=j[s]+" ",m===j[s].toLowerCase()&&(n=!0);n||(e="onField"===a.display?"The file must be in one of these formats: "+k.toUpperCase().trim():"The file chosen at "+d.label+" must be in one of these formats: "+k.toUpperCase().trim())}break;case"phone":if(""===b.value.trim()&&"true"===d.required)e="Please enter a 10-digit number at "+d.label;else if(b.value.length){if(d.format){if(!errors.checkPhoneFormat(b.id,d.format))return!1;r=errors.checkPhone(b.value.trim(),d.format)}else r=errors.checkPhone(b.value.trim());r.ok?document.getElementById(b.id).value=r.phone:e="onField"===a.display?"Please enter a 10-digit number":"Please enter a 10-digit number at "+d.label}break;case"email":""===b.value.trim()&&"true"===d.required?e="onField"===a.display?"Please enter an email":"Please enter an email at "+d.label:b.value.length&&!errors.checkEmail(b.value.trim())&&(e="onField"===a.display?"This email doesn't look valid":"The email at "+d.label+" doesn't look valid")}return e.length&&(e+=".","topDisplay"===a.display?(f=e,e='<p id="err-'+b.id+'" class="'+a.topErrorItemClass+'">'+e+"</p>",errors.substrArray(c,f)||c.push(e)):(c.indexOf(f)<0&&c.push(e),d.group?errors.showError(d.group,e):errors.showError(b.id,e))),c},errors.checkConditions=function(b,c,d){var g,h,e="",f=0,i=!1;switch(b.type){case"string":c.value.length&&(b.max&&!b.min&&c.value.trim().length>b.max?e="onField"===a.display?"This must be no more than "+b.max+" characters":"The "+b.label+" must be no more than "+b.max+" characters":b.min&&!b.max&&c.value.trim().length<b.min?e="onField"===a.display?"This must contain at least "+b.min+" characters":"The "+b.label+" must contain at least "+b.min+" characters":b.min&&b.min&&(c.value.trim().length>b.max||c.value.trim().length<b.min)&&(e="onField"===a.display?"This must be between "+b.min+" and "+b.max+" characters":"The "+b.label+"'s length must be between "+b.min+" and "+b.max+" characters"),(b.nonums||b.nospecials)&&(h=errors.checkForCharacters(b,c.value.trim()),"ok"!==h&&(b.nonums&&"true"===b.nonums&&(i=!0),"ns"===h?e=i?"onField"===a.display?"This can contain only letters, no numbers or special characters":"The "+b.label+" can contain only letters, no numbers or special characters":"onField"===a.display?"This can contain only letters or numbers, no special characters":"The "+b.label+" can contain only letters or numbers, no special characters":"an"===h?e="onField"===a.display?"This can contain only letters or numbers, no special characters":"The "+b.label+" can contain only letters or numbers, no special characters":"ao"===h&&(e="onField"===a.display?"This can contain only letters, no numbers or special characters":"The "+b.label+" can contain only letters, no numbers or special characters"))));break;case"number":c.value.length&&(b.max&&!b.min&&c.value>b.max?e="onField"===a.display?"This number can't be more than "+b.max:"The "+b.label+" can't be more than "+b.max:b.min&&!b.max&&c.value<b.min?e="onField"===a.display?"This number can't be less than "+b.min:"The "+b.label+" can't be less than "+b.min:b.min&&b.min&&(c.value>b.max||c.value<b.min)&&(e="onField"===a.display?"This number must be between "+b.min+" and "+b.max:"The "+b.label+" must be between "+b.min+" and "+b.max));break;case"check":b.min&&!b.max&&d<b.min?e="onField"===a.display?"Please check at least "+b.min+" item"+errors.plural(b.min):"Please check at least "+b.min+" item"+errors.plural(b.min)+" at "+b.label:!b.min&&b.max&&d>b.max?e="onField"===a.display?"Please check no more than "+b.max+" item"+errors.plural(b.max):"Please check no more than "+b.max+" item"+errors.plural(b.max)+" at "+b.label:b.min&&b.min&&(d>b.max||d<b.min)&&(e="onField"===a.display?"Please check between "+b.min+" and "+b.max+" items":"Please check between "+b.min+" and "+b.max+" items at "+b.label);break;case"multiselect":g=document.getElementById(c.id).options;for(var j=0;j<g.length;j++)g[j].selected&&f++;b.min&&!b.max&&f<b.min?e="onField"===a.display?"Please select at least "+b.min+" item"+errors.plural(b.min):"Please select at least "+b.min+" item"+errors.plural(b.min)+" at "+b.label:!b.min&&b.max&&f>b.max?e="onField"===a.display?"Please select no more than "+b.max+" item"+errors.plural(b.max):"Please select no more than "+b.max+" item"+errors.plural(b.max)+" at "+b.label:b.min&&b.min&&(f>b.max||f<b.min)&&(e="onField"===a.display?"Please select between "+b.min+" and "+b.max+" items":"Please select between "+b.min+" and "+b.max+" items at "+b.label)}return e},errors.getDateRangeDates=function(a,b){for(var d,e,f,c=errors.getRequiredFields(),g=0;g<c.length;g++)c[g].dataset&&c[g].dataset.group&&c[g].dataset.group===b&&(c[g].dataset.fromTo&&"from"===c[g].dataset.fromTo?e=c[g]:c[g].dataset.fromTo&&"to"===c[g].dataset.fromTo&&(f=c[g]));return d={fromDateId:e.id,fromDateValue:e.value,toDateId:f.id,toDateValue:f.value}},errors.checkForCharacters=function(a,b){for(var c=[],d=65;d<=90;d++)c.push(d);for(var d=97;d<=122;d++)c.push(d);if(!a.nonums||a.nonums&&"false"===a.nonums){for(var d=48;d<=57;d++)c.push(d);nums=!0}c.push(32),c.push(39),c.push(45);for(var d=0;d<b.length;d++)if(c.indexOf(b.substr(d,1).charCodeAt(0))<0)return c.indexOf(97)>0?"ao":"an";return"ok"},errors.checkEmail=function(a){var c;if(a.search("@")>-1&&a.search(".")>-1){if(c=a.split("@"),c[0].length<2)return!1;c=c[1].split(".");for(var d=0;d<c.length;d++){if(c[d].length<2)return!1;for(var e=0;e<c[d].length;e++)if(!isNaN(c[d].substr(e,1)))return!1}return a.split("").forEach(function(b){return a.indexOf(b)>-1?!1:void 0}),!0}return!1},errors.checkPhone=function(a,b){var c,d,e,f,h,g={},i="";if(a&&a.length){for(var j=0;j<a.length;j++)isNaN(a.substr(j,1))||" "===a.substr(j,1)||(i+=a.substr(j,1));10!==i.length||isNaN(i)?g={phone:a,ok:!1}:(d=i.substr(0,3),e=i.substr(3,3),f=i.substr(6,4),b&&b.length?"."===b||"-"===b?c=d+b+e+b+f:"()-"===b||"()."===b?(h="()-"===b?"-":".",c="("+d+") "+e+h+f):c=i:c=i,g={phone:c,ok:!0})}else g={phone:"",ok:!1};return g},errors.checkPhoneFormat=function(a,b){var d,c=["()-","().","-","."];return c.indexOf(b)<0?(d='The phone format requested by the input element "'+a+"\" isn't valid. Please see the doc for available options and usage.",errors.showInternalError(d),!1):!0},errors.checkDateFormat=function(a,b,c){var f,d=["MMDDYYYY","YYYYMMDD"],e=["/","-"];return d.indexOf(b.toUpperCase())<0?(f='The date format requested by the input element "'+a+"\" isn't valid.\n",f+="Valid formats are: "+d.join(" or ")+". Case doesn't matter.",errors.showInternalError(f),!1):e.indexOf(c)<0?(f='The date separator requested by the input element "'+a+"\" isn't valid.\n",f+="Valid separators are: "+e.join(" or ")+".",errors.showInternalError("Please use one of these date format separators: "+e.join(" or ")+"."),!1):!0},errors.showDateFormat=function(a){return"MMDDYYYY"===a.format.toUpperCase()?"MM"+a.separator+"DD"+a.separator+"YYYY":"YYYYMMDD"===a.format.toUpperCase()?"YYYY"+a.separator+"MM"+a.separator+"DD":void 0},errors.checkDate=function(a){var b=a.value,c=2,d=a.dataset.separator,e=[];if(2!==errors.countSubstring(b,d)||10!==b.length)return!1;if(a.dataset&&a.dataset.format&&a.dataset.separator&&(errors.checkDateFormat(a.dataset.id,a.dataset.format,a.dataset.separator),"y"===a.dataset.format.substr(0,1).toLowerCase()&&(c=0)),e=b.split(d),4!==e[c].length)return!1;for(var f=0;f<e.length;f++)if(f!==c){if(!e[f].length)return!1;if(e[f].length>2)return!1}return(newDate=new Date(b))?isNaN(newDate.getTime())?!1:!0:!1},errors.padDate=function(b){if(a.padDates&&b.value.trim().length){var c=2,d=0,e=1,f="/",g="",h=[];b.value.search("-")>-1&&(f="-"),b.dataset&&b.dataset.format&&b.dataset.separator&&(errors.checkDateFormat(b.dataset.id,b.dataset.format,b.dataset.separator),"y"===b.dataset.format.substr(0,1).toLowerCase()&&(c=0,d=1,e=2,f=b.dataset.separator)),h=b.value.split(b.dataset.separator),1===h[d].length&&(h[d]="0"+h[d]),1===h[e].length&&(h[e]="0"+h[e]),g=0===c?h[c]+f+h[d]+f+h[e]:h[d]+f+h[e]+f+h[c],document.getElementById(b.id).value=g}},errors.checkDateRange=function(a,b){return Date.parse(b)<Date.parse(a)?!1:!0},errors.checkRadio=function(b){for(var c=document[a.formName][b],d=!1,e=0;e<c.length;e++)if(c[e].checked){d=!0;break}return d},errors.makeField=function(a){var b={};return b.id=a,document.getElementById(a).name&&(b.name=document.getElementById(a).name),document.getElementById(a).dataset&&(b.dataset=document.getElementById(a).dataset),b.value=document.getElementById(a).value,b},errors.plural=function(a){return a&&!isNaN(a)?1===a?"":"s":""},errors.countSubstring=function(a,b){var c=0;return a.split("").forEach(function(a){a===b&&c++}),c},errors.substrArray=function(a,b){var c=!1;return a.forEach(function(a){return a.search(b)>-1?void(c=!0):void 0}),c},errors.getGroupStatus=function(a){for(var b=errors.getRequiredFields(),c=0,d=0;d<b.length;d++)b[d].dataset&&b[d].dataset.group&&b[d].dataset.group===a&&document.getElementById(b[d].id).checked&&c++;return c},errors.getGroupMemberIds=function(a){for(var b=errors.getRequiredFields(),c=[],d=0;d<b.length;d++)b[d].dataset&&b[d].dataset.group&&b[d].dataset.group===a&&c.push(b[d].id);return c},errors.addClass=function(a,b){var c=document.getElementById(a).classList;c.add(b)},errors.removeClass=function(a,b){var c=document.getElementById(a).classList;c.remove(b)},errors.listen=function(a,b,c){var d=[],e={};if(a=a.split(" "),a.length&&b&&c&&"function"===typeof c){a.forEach(function(a){if("."===a.substr(0,1)){classes=document.getElementsByClassName(a.replace(".","").trim());for(var c=0;c<classes.length;c++)d.push(classes[c])}else"#"===a.substr(0,1)&&d.push(document.getElementById(a.replace("#","").trim()))});for(var f=0;f<d.length;f++)d[f].addEventListener(b,function(a){for(key in a.target)try{e[key]=a.target[key]}catch(a){e[key]=null}c(e)})}},errors}